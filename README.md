# Active Polymer Simulation Dashboard

Interactive visualization dashboard for exploring active polymer simulation data.

## Overview

This Streamlit dashboard provides an interactive interface to explore correlations and patterns in active polymer simulation data across TASEP parameter space (α_in, α_out).

## Features

### Tab 1: Scatter Correlations
- Interactive scatter plots between any two observables
- Color coding by parameter values
- Correlation coefficients and R² values
- Hover tooltips with full parameter information

### Tab 2: Parameter Space
- Heatmap visualization of observables vs (α_in, α_out)
- Fixed Pe = 10.0, κ = 1.0
- Interactive colorscale
- Statistical summaries (min, max, mean, std)

### Tab 3: TASEP Phase Diagram
- Classical TASEP phase diagram visualization
- Multiple observables: Current (J), Density (ρ), Skewness, First Moment
- Phase boundary overlays (LD, HD, MC phases)
- Phase-specific statistics

## Installation

1. Install dependencies:
```bash
pip install -r requirements.txt
```

Or install individual packages:
```bash
pip install streamlit pandas numpy plotly
```

## Usage

1. Ensure `data_compiled.csv` is present in the `dashboard/` directory:
```bash
python3 compile_all_data.py
```

2. Launch the dashboard:
```bash
cd dashboard
streamlit run app.py
```

The dashboard will open in your default web browser at `http://localhost:8501`.

## Data Sources

The dashboard aggregates data from:
- **TASEP observables**: `src/test_results/chain_100/*.npy` (J, ρ, skewness, first_moment)
- **E2E vector decorrelation**: `DATA_E2E/*_decay_time_data.npy`
- **E2E distance statistics**: `DATA_E2E/*_distance_stats.npy`
- **Radius of gyration**: `DATA_RG/*_rg_stats.npy`
- **MSD/Diffusion**: `DATA_MSD/COM/*_diffusion_data.npy`

## Available Observables

### TASEP Observables
- `J_avg`: Time-averaged current
- `rho_avg`: Time-averaged density
- `skewness`: Spatial density skewness
- `first_moment`: First moment of density distribution

### E2E Observables
- `tau_e2e_vector`: E2E vector decorrelation time
- `tau_e2e_vector_R2`: Fit quality for vector decorrelation
- `Re_avg`: Mean end-to-end distance
- `Re_std`: Standard deviation of E2E distance
- `tau_e2e_distance`: E2E distance autocorrelation decay time
- `tau_e2e_distance_R2`: Fit quality for distance autocorrelation

### Polymer Conformation
- `Rg_avg`: Mean radius of gyration
- `Rg_std`: Standard deviation of radius of gyration
- `Re_Rg_ratio`: Ratio of end-to-end distance to radius of gyration

### Dynamics
- `D_eff`: Effective diffusion coefficient (long-time plateau)

## Parameter Space

- **Pe**: Péclet number (activity strength) = 10.0
- **α_in**: TASEP entry rate (0.1 - 1.0)
- **α_out**: TASEP exit rate (0.1 - 1.0)
- **κ**: Bending rigidity = 1.0
- **pol**: Simulation index = 1

## Troubleshooting

**Missing data file error:**
- Run `python3 compile_all_data.py` from the project root to generate `dashboard/data_compiled.csv`

**Empty plots:**
- Some observables may have incomplete data coverage
- Check the data coverage statistics printed by `compile_all_data.py`
- Ensure all analysis scripts (calc_msd.sh, calc_e2e.sh, calc_rg.sh) have been run

**Dashboard won't start:**
- Verify Streamlit installation: `streamlit --version`
- Check Python version (requires Python 3.8+)

## Corruption Analysis Dashboard

A dedicated dashboard for analyzing trajectory corruption statistics.

### Features

**Corruption Dashboard (`corruption_app.py`)**:
- **Overview metrics**: Total simulations, corruption rate, average loss statistics
- **Interactive heatmaps**: Visualize corruption metrics in (α_in, α_out) parameter space
  - Blocks lost percentage
  - Frames lost percentage
  - Number of eliminated blocks
  - Total trajectory length
- **Detailed simulation view**: Click-to-explore functionality
  - Block timeline visualization (green=valid, red=eliminated)
  - Corruption region identification (consecutive vs. isolated blocks)
  - Frame and block statistics
- **Distribution analysis**: Histograms and scatter plots of corruption patterns

### Usage

```bash
cd dashboard
streamlit run corruption_app.py
```

The corruption dashboard reads `corruption_report.csv` from the project root, which is generated automatically by `rewrite_simulations.sh` after trajectory processing.

### Data Source

- **Input file**: `corruption_report.csv` (project root)
- **Generated by**: `rewrite_simulations.sh` (compiles temporary JSON logs from `/tmp/`)
- **Per-simulation data**:
  - Blocks: original, valid, eliminated, percentage lost
  - Frames: original, written, lost, percentage lost
  - Eliminated block numbers (for timeline visualization)
  - Processing timestamp

### Workflow

1. Run trajectory processing: `./rewrite_simulations.sh`
2. Script generates temporary corruption logs in `/tmp/write_vx_log_*.json`
3. Script compiles logs into `corruption_report.csv`
4. Launch corruption dashboard: `streamlit run corruption_app.py`

## Notes

- The dashboard uses cached data loading for performance
- Refresh the page to reload data after updating `data_compiled.csv` or `corruption_report.csv`
- All plots are interactive (zoom, pan, hover)
- Phase boundaries in TASEP diagram are theoretical (α = 0.5)
- Corruption dashboard includes click-to-explore heatmap functionality
